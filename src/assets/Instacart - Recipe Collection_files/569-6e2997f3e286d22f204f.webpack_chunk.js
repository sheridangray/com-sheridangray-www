"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[569],{68922:(e,t,n)=>{n.d(t,{Nq:()=>u,eh:()=>c,d5:()=>d,sk:()=>p});var r=n(0),o=n(202),i=n.n(o),a=n(38827),l=n(3);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}const u=r.createContext(void 0),c=()=>{const e=(0,r.useContext)(u);if(!e)throw new Error("LoadGlobalStateContext not provided");return e};function d(e){function t(t){const{loading:n,loaded:r}=c();return(0,l.tZ)(e,s({},t,{globalStateLoading:n,globalStateLoaded:r}))}return t.displayName="withLoadGlobalState(".concat((0,a.G)(e),")"),i()(t,e)}function p({children:e}){return e(c())}},84408:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(3946);const o=({term:e,retailerSlug:t})=>(0,r.generatePath)("/:retailerSlug/search/:term",{term:e,retailerSlug:t})},10030:(e,t,n)=>{n.d(t,{z:()=>O,Z:()=>N});var r=n(0),o=n(51814),i=n(31257),a=n(48839);let l=!1;try{const e={get passive(){l=!0}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){l=!1}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}let h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,n,r,o=d(i);function i(){return s(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.enabled&&this.open()}},{key:"componentDidUpdate",value:function(e){e.enabled!==this.props.enabled&&(this.props.enabled?this.open():this.close()),e.preventTouchScrollWhenEnabled!==this.props.preventTouchScrollWhenEnabled&&(this.props.preventTouchScrollWhenEnabled?this.preventScroll():this.enableScroll())}},{key:"componentWillUnmount",value:function(){this.enableScroll(),this.props.enabled&&this.close()}},{key:"preventScrollHandler",value:function(e){e.preventDefault()}},{key:"open",value:function(){this.props.preventTouchScrollWhenEnabled&&this.preventScroll(),this.props.belowHeader?this.props.openBelowHero():this.props.open()}},{key:"close",value:function(){this.enableScroll(),this.props.close()}},{key:"preventScroll",value:function(){document.addEventListener("touchmove",this.preventScrollHandler,!!l&&{passive:!1})}},{key:"enableScroll",value:function(){document.removeEventListener("touchmove",this.preventScrollHandler)}},{key:"render",value:function(){return null}}])&&u(t.prototype,n),r&&u(t,r),i}(r.Component);const f={open:i.C,close:i.v,openBelowHero:a.showOverlayBelowHero},v=(0,o.connect)(void 0,f)(h);var m=n(11),y=n(19436),b=n(68922),S=n(94132),w=n(7845),_=n(3);function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}const O="dropdown-container",R={containerRenderer:{padding:0,backgroundColor:"white",borderRadius:"5px",overflow:"hidden"},mainModuleStyles:{marginBottom:0},list:{margin:0,padding:0}},C=e=>({zIndex:101,display:e?"block":"none",position:"absolute",left:0,right:0,marginTop:"4px",padding:"inherit"}),D={setInputFocusState:y.WM};let L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(i,e);var t,n,r,o=T(i);function i(){return x(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"componentWillUnmount",value:function(){this.props.setInputFocusState(!1,this.props.searchBar)}},{key:"render",value:function(){const{autocompleteContainerPath:e,isFocused:t,activeEntriesCount:n,disableOverlay:r,style:o={},searchBar:i,globalStateLoading:a}=this.props,l=t&&n>0,s="undefined"==typeof window||a;return(0,_.tZ)("div",{style:{...C(l),...o.container},"data-testid":"autocomplete-dropdown",onMouseDown:e=>{e.preventDefault()},className:"search-dropdown"},(0,_.tZ)("ul",{style:R.list,role:"listbox",id:O,"aria-labelledby":"label"},(0,_.tZ)(w.r.Provider,{value:i},(0,_.tZ)(S.default,{containerPath:e,styles:{container:{...R.containerRenderer,...o.containerRenderer}},allModuleStyles:{main:{...R.mainModuleStyles,...o.mainModuleStyles}},fullPageMiddleWrapper:!0,skipFetchOnMount:s}))),(0,_.tZ)(v,{belowHeader:!0,enabled:l&&!r}),(0,_.tZ)(m.default.Style,{scopeSelector:".search-dropdown .module-renderer > div > div",rules:{marginLeft:"0 !important",marginRight:"0 !important",width:"100% !important"}}),(0,_.tZ)(m.default.Style,{scopeSelector:".search-dropdown .module-wrapper:empty",rules:{display:"none"}}))}}])&&k(t.prototype,n),r&&k(t,r),i}(r.Component);const N=(0,o.connect)(((e,{searchBar:t})=>({isFocused:e.app.searchBar.searchBars[t].isFocused,activeEntriesCount:e.app.searchBar.activeEntries.length})),D)((0,b.d5)(L))},65759:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(0),o=n(11),i=n(86237),a=n(12504),l=n(61492),s=n(32431),u=n(3);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}const d={borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px",flexGrow:1,height:"36px",marginBottom:0,fontSize:"16px",backgroundColor:i.O9.GRAY_97,WebkitAppearance:"none",lineHeight:"normal",border:"1px solid #e5edec",paddingLeft:15,paddingRight:15},p={opacity:1,WebkitTextFillColor:i.O9.GRAY_46},g={borderTopRightRadius:"5px",borderBottomRightRadius:"5px",borderTopLeftRadius:0,borderBottomLeftRadius:0,width:"50px",height:"36px"},h=(0,s.Z)(["globals.search_bar"])((0,o.default)((e=>{const{placeholderText:t,value:n,icon:o,onChange:s,onSearch:h,onFocus:f,onBlur:v,onKeyDown:m,onClick:y,formStyle:b,inputStyle:S,buttonStyle:w,forwardRef:_,inputProps:x,disabled:k,focusable:E=!0,selectTextOnFocus:T,searchButtonLabel:I,ariaControls:Z,dropdownVisible:O,termNavigationInstructionsId:R,numberOfEntries:C,persistentSearchBar:D,t:L}=e,[N,H]=(0,r.useState)(!1),B="".concat(C," results found"),A=D?{...S,paddingLeft:"24px"}:S,P=0===(null==n?void 0:n.length)||k;return(0,u.tZ)("form",{onSubmit:e=>{e.preventDefault(),h&&h(e),window.scrollTo(0,0)},role:"search",style:{...(G=N,{display:"flex",flexWrap:"nowrap",borderRadius:"5px",boxShadow:G?"".concat(a.g," 0 0 0 2px"):"rgba(0, 0, 0, 0.16) 0 0 0 1px"}),...b},action:".","data-identifier":"search_input"},D&&(0,u.tZ)(i.qZ,{name:"search",color:i.O9.GRAY_46,size:"small",style:{position:"absolute",left:"52px",top:"18px"}}),(0,u.tZ)("div",{role:"log","aria-live":"polite",style:a.Z.VISUALLY_HIDDEN},B),(0,u.tZ)("input",c({type:"text",autoCorrect:"off",autoCapitalize:"off",ref:_,placeholder:t,value:n,onChange:s,"aria-haspopup":"listbox","aria-expanded":O,onFocus:e=>{H(!0),T&&e.target.select(),f&&f(e)},onBlur:e=>{H(!1),v&&v(e)},onKeyDown:m,onClick:y,"aria-controls":Z,style:(0,l.B)({...d,...(!E||k)&&p,...A}),"aria-describedby":R,"aria-label":L("search_bar.search"),disabled:!E||k},x,!E&&{tabIndex:-1})),(0,u.tZ)(i.zx,c({icon:o||"search",type:"submit",elementAttributes:{"aria-label":I},style:{...g,...w},disabled:P,onMouseDown:e=>{!n&&e.preventDefault()}},!E&&{tabIndex:-1})));var G})))},47243:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(0),o=n(3946),i=n(38617),a=n(47210),l=n(3533),s=n(60200),u=n(33130),c=n(49219),d=n(95635),p=n(84408),g=n(11087),h=n(65759),f=n(10030),v=n(74636),m=n(66350),y=n(3),b=n(87491);const S=e=>{var t;const{placeholderText:n,inputProps:S,autocompleteEnabled:w,focusable:_=!0,inputStyle:x,buttonStyle:k,formStyle:E,preventBlur:T,selectTextOnFocus:I,searchBar:Z,customSearchHandler:O,searchButtonLabel:R,termNavigationInstructionsId:C,autoFocus:D,icon:L,searchButtonAriaLabel:N}=e,{trackEvent:H}=(0,l.r)(),B=(0,u.Vj)(),{typedEntry:A,setTypedEntry:P,isFocused:G,setIsFocused:V,highlightedTerm:M,setHighlightedTerm:F,activeGroups:j,dropdownVisible:W,setDropdownVisible:z,searchValue:q}=(0,v.J)(),{highlightedEntry:Y,getPreviousHighlightedEntry:X,getNextHighlightedEntry:U,resetHighlightedEntry:J}=(0,m.Z)(j),{loading:K,retailerInventorySessionToken:Q}=(0,i.Yn)(),$=(0,o.useHistory)(),{shop:ee}=(0,c.gt)(),[te,ne]=(0,r.useState)(""),re=null==ee?void 0:ee.retailerSlug,oe=Y?(0,d.AZ)(Y):"",ie=(0,d.o8)(j,oe),ae=!ee,le=(0,r.useRef)(null),se=Q||"",[ue]=(0,g.I$)({variables:{retailerInventorySessionToken:se,query:A},onCompleted:e=>{if("QueryInsightIntentsCollectionsIntent"===e.queryIntent.__typename){const{collectionIdentifiers:t}=e.queryIntent,{slug:n}=null==t?void 0:t[0];if(!n)return void ne("");const r=(0,o.generatePath)(a.uv.collection.path,{retailerSlug:re,collectionSlug:n});ne(r)}else ne("")}});(0,r.useEffect)((()=>{G||le.current&&le.current.blur()}),[G]),(0,r.useEffect)((()=>{const e=le.current;D&&e&&(null!=e&&e.scrollIntoView&&e.scrollIntoView(),e.focus())}),[D,le.current]);return(0,y.tZ)(h.default,{placeholderText:n,onSearch:()=>{z(!1),V(!1);const e=null==ee?void 0:ee.retailerSlug;if(te.length>0)return $.push(te);if("function"==typeof O)return O();if(!e)return;const t=(0,p.G)({term:A,retailerSlug:e});return $.push(t)},onFocus:()=>{H("autosuggest.enter",{source:(0,s.T)($.location.pathname),content_type:"autosuggestion",autosuggestion_session_id:B}),z(!0),J(),F(null),V(!0)},onClick:()=>{V(!0),z(!0)},onBlur:T?()=>{}:()=>{H("autosuggest.exit",{source:(0,s.T)($.location.pathname),content_type:"autosuggestion",autosuggestion_session_id:B}),V(!1),J(),z(!1),F(null)},value:q,onKeyDown:e=>{if(W)switch(e.key){case"ArrowDown":{const e=U();F(e);break}case"ArrowUp":{e.preventDefault();const t=X();F(t);break}case"Escape":!T&&z(!1)&&V(!1),le.current&&le.current.blur(),J(),F(null);break;default:M&&P(M.viewSection.textString),J(),F(null)}},onChange:t=>{const{value:n}=t.target;P(n),Y&&J(),A.length>0&&(t=>b.throttle((()=>{const{onInputChange:n}=e;K||(ue(),n({variables:{retailerInventorySessionToken:se,query:t}}))}),200))(n)()},forwardRef:le,numberOfEntries:5,inputProps:{...S,"aria-describedby":C,...w&&(!(null==Y||null===(t=Y.viewSection)||void 0===t||!t.id)||!!oe)&&{"aria-activedescendant":ie},...w&&{"aria-autocomplete":"both","aria-controls":f.z}},ariaControls:f.z,disabled:ae,inputStyle:{...ae?{opacity:.1}:{},...x},buttonStyle:{...ae?{opacity:.1}:{},...k},focusable:_,formStyle:E,selectTextOnFocus:I,searchBar:Z,searchButtonLabel:N||R,termNavigationInstructionsId:C,dropdownVisible:W,icon:L})}},76709:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var r=n(0),o=n(58894),i=n(3533),a=n(8970),l=n(6340),s=n(49214),u=n(49219),c=n(3946),d=n(95635),p=n(65933),g=n(11087),h=n(12504),f=n(5806),v=n(48497),m=n(47243),y=n(71297),b=n(7845),S=n(86237),w=n(1608),_=n(75632),x=n(74636),k=n(84408),E=n(1015),T=n(3);function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}function Z({term:e,resetHighlightedEntry:t,setHighlightedEntry:n,...r}){return(0,T.tZ)(E.Z,I({onTouchStart:()=>n(e),onTouchEnd:()=>t()},r))}var O=n(1956),R=n(7356),C=n(11),D=n(64447),L=n(69139),N=n(78251),H=n(87491);const B={image:{...S.W0.MARGIN_RIGHT_SM,width:40,height:40,borderRadius:5},icon:{...S.W0.MARGIN_RIGHT_SM,flexShrink:0},actionHandler:{textDecoration:"none",display:"flex",alignItems:"center",listStyle:"none",...S.W0.PADDING_X_SM,paddingTop:4,paddingBottom:4,":hover":{textDecoration:"none"},":focus":{outline:"none",textDecoration:"none"},flexGrow:1,[S.jW.down("sm")]:{...S.W0.PADDING_Y_XS}},text:{display:"block",alignItems:"center",fontSize:"17px",...!(0,L.tq)()&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",[S.jW.between("xs","md")]:{maxWidth:"110"}}}},A=(0,S.Zz)((0,C.default)((({term:e,iconName:t,children:n,typedEntry:o="",onClick:i})=>{const{viewSection:a}=e,l=(0,N.MS)(o),s=new RegExp("(".concat(l,")"),"ig"),u=a.textString.split(s).filter(Boolean),d=(0,D.Z)(),p=(0,N.It)(e,d);var g;return a.textString?p?(0,T.tZ)(r.Fragment,null,(0,T.tZ)(c.Link,{to:p,style:B.actionHandler,"data-testid":"autocomplete-entry-link",onClick:i,"aria-label":a.textString},"thumbnailImage"in a&&(0,T.tZ)("img",{src:a.thumbnailImage.url,alt:"",style:B.image}),(0,T.tZ)(S.xv,{variant:"T.18",style:B.text,"data-testid":"autocomplete-entry-text"},u.map((e=>{return(0,T.tZ)("span",{"aria-hidden":!0,key:H.uniqueId(e),style:o?(t=null==e?void 0:e.toLowerCase().indexOf(null==l?void 0:l.toLowerCase()),{alignItems:"center",fontSize:"17px",fontWeight:t<0?"bold":"normal",...t>0&&{fontSize:"14px",...S.W0.MARGIN_LEFT_XS}}):{color:S.O9.GRAY_20}},e);var t}))),!n&&(0,T.tZ)(S.qZ,{name:t,size:"small",style:{...B.icon,marginLeft:"auto",marginRight:0},color:S.O9.GRAY_46})),Boolean(n)&&(0,T.tZ)(r.Fragment,null,n,(0,T.tZ)(S.qZ,{name:t,size:"small",style:B.icon,color:S.O9.GRAY_46}))):null:(O.Z.error("Autosuggest type ".concat(null==e||null===(g=e.viewSection)||void 0===g?void 0:g.__typename," is missing a term"),{owner:R.Z.customers_search}),null)}))),P=({term:e,ariaLabelOption:t,iconName:n,style:o,onDelete:a,position:u,retailerSlug:d,setHighlightedEntry:p,resetHighlightedEntry:g,termType:h})=>{const[f,v]=(0,r.useState)(!1),{trackEvent:m}=(0,i.r)(),y=(0,l.m0)(),E="addToOrder"===(0,r.useContext)(b.r)?{...S.W0.PADDING_LEFT_LG}:{},I={backgroundColor:S.O9.GRAY_93},{setIsFocused:O,highlightedTerm:R,setHighlightedTerm:C,setTypedEntry:D,setDropdownVisible:L,typedEntry:N}=(0,x.J)(),{trackingProperties:H}=e.viewSection,B=(0,c.useHistory)(),P=f||e.viewSection.id===(null==R?void 0:R.viewSection.id);(0,r.useEffect)((()=>{m("autosuggest","load",(0,l._E)({...H,event_id:(0,s.Z)()},y))}),[H,m,y]);const G=(0,w.YD)({threshold:[0,_.T,1]}),[V]=G;return(0,_.r)({firstPixelTrackingEventName:"autosuggest.display_pixel_view",viewableTrackingEventName:"autosuggest.display_substantive_view",trackingProperties:(0,l._E)({...H,position:u,event_id:(0,s.Z)()},y),inViewResponse:G}),(0,T.tZ)(Z,{setHighlightedEntry:p,resetHighlightedEntry:g,inViewRef:V,term:e,ariaLabelOption:t,style:[(M=Boolean(a),[M&&{display:"flex",justifyContent:"space-between",alignItems:"center"}]),E,{},o,{":hover":{}}],isHighlighted:P,highlightColor:I,onMouseEnter:()=>{m("autosuggest","engagement",(0,l._E)({...H,engagement_type:"hover",event_id:(0,s.Z)()},y)),v(!0)},onMouseLeave:()=>v(!1)},(0,T.tZ)(A,{term:e,iconName:n,typedEntry:"retailerAutosuggestionsV2"===h?N:"",onClick:()=>{m("autosuggest","engagement",(0,l._E)({...H,engagement_type:"click",event_id:(0,s.Z)()},y)),L(!1),C(null),O(!1),D(e.viewSection.textString);const t=(0,k.G)({term:e.viewSection.textString,retailerSlug:d});B.push(t)}}));var M};var G=n(87491);const V={icon:{...S.W0.MARGIN_RIGHT_XS,flexShrink:0},actionHandler:{textDecoration:"none",display:"flex",alignItems:"center",listStyle:"none",...S.W0.PADDING_X_SM,...S.W0.PADDING_Y_XS,":hover":{textDecoration:"none"},":focus":{outline:"none",textDecoration:"none"},flexGrow:1,[S.jW.down("sm")]:{paddingTop:"12px",paddingBottom:"12px"}},text:{display:"block",alignItems:"center",fontSize:"17px"}},M=(e,t,n)=>{const r=n>0?S.O9.GRAY_46:S.O9.GRAY_20;return{display:"inline-block",alignItems:"center",fontSize:"17px",whiteSpace:"pre",fontWeight:n<0?"bold":"normal",...n>0&&{fontSize:"14px",...S.W0.MARGIN_LEFT_XS},color:e?t:r}},F=(0,S.Zz)((0,C.default)((({isHighlighted:e,foregroundColor:t,term:n,iconName:o,typedEntry:i="",onClick:a})=>{const{viewSection:l}=n,[s,u]=(0,r.useState)(!1),d=s||e||!1,p=(0,N.MS)(i),g=new RegExp("(".concat(p,")"),"ig"),h=l.textString.split(g).filter(Boolean);var f;if(!l.textString)return O.Z.error("Autosuggest type ".concat(null==n||null===(f=n.viewSection)||void 0===f?void 0:f.__typename," is missing a term"),{owner:R.Z.customers_search}),null;const v=(0,N.It)(n,!1);return v?(0,T.tZ)(c.Link,{to:v,style:V.actionHandler,"data-testid":"autocomplete-entry-link",onClick:a,"aria-label":l.textString,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},(0,T.tZ)(S.qZ,{name:o,size:"small",style:V.icon,color:d?t:S.O9.GRAY_46}),(0,T.tZ)(S.xv,{variant:"T.18",style:V.text,"data-testid":"autocomplete-entry-text"},h.map((e=>(0,T.tZ)("span",{"aria-hidden":!0,key:G.uniqueId(e),style:M(d,t,null==e?void 0:e.toLowerCase().indexOf(null==p?void 0:p.toLowerCase()))},e))))):null}))),j=({term:e,ariaLabelOption:t,iconName:n,style:o,onDelete:a,position:u,retailerSlug:d,setHighlightedEntry:p,resetHighlightedEntry:g,termType:h})=>{const{trackEvent:f}=(0,i.r)(),v=(0,l.m0)(),[m,y]=(0,r.useState)(!1),E="addToOrder"===(0,r.useContext)(b.r)?{...S.W0.PADDING_LEFT_LG}:{},{setIsFocused:I,highlightedTerm:O,setHighlightedTerm:R,setTypedEntry:C,setDropdownVisible:D,typedEntry:L}=(0,x.J)(),{trackingProperties:N}=e.viewSection,H=(0,c.useHistory)(),B=m||e.viewSection.id===(null==O?void 0:O.viewSection.id);(0,r.useEffect)((()=>{f("autosuggest","load",(0,l._E)({...N,event_id:(0,s.Z)()},v))}),[N,f,v]);const A=(0,w.YD)({threshold:[0,_.T,1]}),[P]=A;return(0,_.r)({firstPixelTrackingEventName:"autosuggest.display_pixel_view",viewableTrackingEventName:"autosuggest.display_substantive_view",trackingProperties:(0,l._E)({...N,position:u,event_id:(0,s.Z)()},v),inViewResponse:A}),(0,T.tZ)(Z,{setHighlightedEntry:p,resetHighlightedEntry:g,inViewRef:P,term:e,ariaLabelOption:t,style:[(G=Boolean(a),[G&&{display:"flex",justifyContent:"space-between",alignItems:"center"}]),E,o],isHighlighted:B,onMouseEnter:()=>{f("autosuggest.engagement",(0,l._E)({...N,engagement_type:"hover",event_id:(0,s.Z)()},v)),y(!0)},onMouseLeave:()=>y(!1)},(0,T.tZ)(r.Fragment,null,(0,T.tZ)(F,{term:e,isHighlighted:B,typedEntry:"retailerAutosuggestionsV2"===h?L:"",iconName:n,foregroundColor:S.O9.WHITE,onClick:()=>{f("autosuggest.engagement",(0,l._E)({...N,engagement_type:"click",event_id:(0,s.Z)()},v)),D(!1),R(null),I(!1),C(e.viewSection.textString);const t=(0,k.G)({term:e.viewSection.textString,retailerSlug:d});H.push(t)}})));var G};var W,z=n(6834);function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}function Y(e){const{termType:t,setHighlightedEntry:n,resetHighlightedEntry:r}=e,{shop:o}=(0,u.gt)();return o?(0,T.tZ)(l.GH,{value:{eventMappings:{"item.load":"autosuggest.load","item.display":"autosuggest.display","item.engagement":"autosuggest.engagement"},properties:{autosuggestion_session_id:(0,s.Z)(),content_type:"autosuggestion"}}},(0,T.tZ)(z.C,e,((e,i,a)=>{const l=function(e){switch(e){case z.Z.TEXT_WITH_THUMBNAIL:return P;case z.Z.TEXT:return j;default:return}}(i);return l?(0,T.tZ)(l,q({},e,{setHighlightedEntry:n,resetHighlightedEntry:r,retailerSlug:o.retailerSlug,position:a,iconName:X(t,e.term.__typename),termType:t})):(O.Z.error(new Error("Term variant type ".concat(i," is not supported on store search")),{owner:R.Z.customers_search}),null)}))):null}function X(e,t){return t===W.Aisle||t===W.Department?"browse":"retailerRecentSearchTermsV2"===e?"clock":"retailerPopularSearchTermsV2"===e?"trending":"retailerOftenSearchedNextSearchTermsV2"===e?"lightbulb":"search"}!function(e){e.Aisle="AutosuggestAisleAutosuggestion",e.Department="AutosuggestDepartmentAutosuggestion"}(W||(W={}));var U=n(21563),J=n(66350);function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const Q={list:{margin:0,padding:0},listItem:{listStyle:"none"}},$=e=>({maxWidth:e?"none":"700px",padding:0,marginLeft:"auto",marginRight:"auto",width:"100%",position:"relative"}),ee=e=>{var t;const{autoFocus:n,headers:o,searchBar:i,fullWidth:s,style:u,placeholderText:c,hintString:d,SearchInputComponent:p=m.Z,onDelete:g,onInputChange:b,dropdownStyle:S,icon:w,searchButtonAriaLabel:_,termNavigationInstructions:k,close:E}=e,I=(0,a.d)(),{activeGroups:Z,dropdownVisible:O}=(0,x.J)(),R=void 0!==(null==Z?void 0:Z.retailerRecentSearchTermsV2)&&(null==Z?void 0:Z.retailerRecentSearchTermsV2.length)>0||!1,C=void 0!==(null==Z?void 0:Z.retailerPopularSearchTermsV2)&&(null==Z?void 0:Z.retailerPopularSearchTermsV2.length)>0||!1,D=I&&(R||C),{setHighlightedEntry:L,resetHighlightedEntry:N}=(0,J.Z)(Z);return(0,T.tZ)("div",K({style:{...$(!!s),...u}},d&&{"aria-haspopup":"listbox","aria-owns":f.z,"aria-expanded":O,"aria-label":c}),(0,T.tZ)(l.GH,{value:{eventMappings:{"item.load":"autosuggest.load","item.display":"autosuggest.display","item.engagement":"autosuggest.engagement"},properties:{...Z&&"retailerAutosuggestionsV2"in Z&&(null===(t=Z.retailerAutosuggestionsV2)||void 0===t?void 0:t[0].viewSection.trackingProperties),api_version:4}}},(0,T.tZ)(p,{autoFocus:n,placeholderText:c,searchButtonAriaLabel:_,inputProps:{"aria-controls":f.z},autocompleteEnabled:!0,"aria-activedescendant":"group-".concat(0,"-option-",0),inputStyle:null==e?void 0:e.inputStyle,buttonStyle:null==e?void 0:e.buttonStyle,formStyle:null==e?void 0:e.formStyle,searchBar:null==e?void 0:e.searchBar,customSearchHandler:null==e?void 0:e.customSearchHandler,searchButtonLabel:null==e?void 0:e.searchButtonLabel,termNavigationInstructionsId:U.C,onInputChange:b,icon:w,close:E}),(0,T.tZ)("p",{id:U.C,style:h.Z.VISUALLY_HIDDEN},k),O&&Z&&(0,T.tZ)(y.Z,{style:{dropdown:S}},D?(0,T.tZ)(r.Fragment,null,Object.keys(Z).map((e=>{const t=Z[e];return t?(0,T.tZ)(v.Z,{key:e,terms:t,header:o[e]}):null}))):(0,T.tZ)("ul",{role:"listbox","aria-labelledby":"label",css:Q.list},Object.keys(Z).map(((e,t)=>{const n=Z[e];if(null==n||!n.length)return null;const r="group-".concat(t),a="".concat(r,"-heading");return(0,T.tZ)("li",{role:"group",key:e,"aria-labelledby":a,css:Q.listItem},(0,T.tZ)(Y,{setHighlightedEntry:L,resetHighlightedEntry:N,ariaLabelPrefix:r,termType:e,searchBar:i,header:o[e]||void 0,terms:n,onDelete:g}))}))))))},te=e=>{var t,n,h,f,v;const{autoFocus:m=!1,searchBar:y,SearchInputComponent:b,fullWidth:S,placeholderOverride:w,disableOverlay:_,dropdownStyle:k,inputStyle:E,buttonStyle:I,formStyle:Z,style:O,icon:R,close:C}=e,D=(0,r.useRef)((0,s.Z)()),L=(0,c.useLocation)(),N=(0,d.s2)(L.pathname),{typedEntry:H,setActiveGroups:B}=(0,x.J)(),{shop:A,loading:P}=(0,u.gt)(),G=(null==A?void 0:A.retailerInventorySessionToken)||"",V=null==A?void 0:A.retailerId,M=!V,{data:F}=(0,o.aM)(p.pB,{variables:{retailerId:V||""},skip:M,ssr:M}),{name:j}=(null==F?void 0:F.retailer)||{name:""},{trackEvent:W}=(0,i.r)(),z=(0,a.d)(),{data:q}=(0,g.rX)({ssr:!1}),Y={retailerInventorySessionToken:G,popularLimit:5,recentLimit:5,autosuggestSessionIdRef:D.current},X=P||!G,{data:U,refetch:J}=(K={variables:Y,skip:X,ssr:X},(0,o.aM)(g.z3,K));var K;(0,r.useEffect)((()=>{U&&(U.retailerPopularSearchTermsV2.forEach((e=>{W("autosuggest","load",{...e.viewSection.trackingProperties,autocomplete_term:H,section_name:["popular"],autosuggestion_session_id:D.current})})),U.retailerRecentSearchTermsV2.forEach((e=>{W("autosuggest","load",{...e.viewSection.trackingProperties,autocomplete_term:H,section_name:["recent"],autosuggestion_session_id:D.current})})))}),[U,H,W]),(0,r.useEffect)((()=>{0===H.length&&J()}),[H.length,J]);const[Q]=(0,o.td)(g.r8,{variables:{retailerInventorySessionToken:G,query:H},onCompleted:e=>{e&&e.retailerAutosuggestionsV2&&e.retailerAutosuggestionsV2.length>0&&H.length>0&&(e.retailerAutosuggestionsV2.forEach((e=>{W("autosuggest","load",{...e.viewSection.trackingProperties,autocomplete_term:H,section_name:"autosuggestion",autosuggestion_session_id:D.current})})),B(e))}}),[$]=(0,o.Db)(g.to),[te]=(0,g.GY)({variables:{retailerInventorySessionToken:G,query:N,autosuggestionSessionId:D.current},onCompleted:e=>{var t;null!=e&&null!==(t=e.retailerOftenSearchedNextSearchTermsV2)&&void 0!==t&&t.length&&(e.retailerOftenSearchedNextSearchTermsV2.forEach((e=>{W("autosuggest","load",{...e.viewSection.trackingProperties,autocomplete_term:H,section_name:"often_searched_next_suggestion",autosuggestion_session_id:D.current})})),B(e))},skip:P}),ne=null==q||null===(t=q.viewLayout)||void 0===t||null===(n=t.globalSearchBar)||void 0===n?void 0:n.searchBar,re=null==q||null===(h=q.viewLayout)||void 0===h?void 0:h.globalSearchBar.autosuggestDropdown,oe=null==ne?void 0:ne.searchAccessibilityString,ie=z?null==ne?void 0:ne.searchRetailerAccessibilityMobileString:null==ne?void 0:ne.searchRetailerAccessibilityString,ae="true"===(null==re?void 0:re.yourFrequentSearchesEnabledVariant);(0,r.useEffect)((()=>{N&&(!re||re.oftenSearchedNextExperimentVariant!==g.wx.COMPLEMENTARY_IMPROVED&&re.oftenSearchedNextExperimentVariant!==g.wx.RELATED?Q():te())}),[N,y,Q,re,te,z]);const le=null==q||null===(f=q.viewLayout)||void 0===f||null===(v=f.globalSearchBar)||void 0===v?void 0:v.searchBar,se=null==le?void 0:le.retailerHintString,ue=null==le?void 0:le.hintString,ce=w||(null==se?void 0:se.replace("%{retailer_name}",j))||"";return(0,r.useEffect)((()=>{0===(null==H?void 0:H.length)&&U&&B(U)}),[U,H,B]),(0,T.tZ)(l.GH,{value:{eventMappings:{"item.load":"autosuggest.load","item.display":"autosuggest.display","item.engagement":"autosuggest.engagement"},properties:{autosuggestion_session_id:D.current,api_version:4}}},(0,T.tZ)(ee,{fullWidth:S,autoFocus:m,headers:(0,d.BW)(re,ae),searchBar:y,hintString:ue||"",placeholderText:ce,onInputChange:Q,onDelete:$,SearchInputComponent:b,disableOverlay:_,dropdownStyle:k,inputStyle:E,buttonStyle:I,formStyle:Z,style:O,icon:R,searchButtonAriaLabel:oe,termNavigationInstructions:ie,close:C}))}},21563:(e,t,n)=>{n.d(t,{C:()=>r});const r="search-term-accessibility-navigation"},65933:(e,t,n)=>{n.d(t,{pB:()=>l,ZP:()=>u});var r=n(0),o=n(58894),i=n(47965),a=n(49219);const l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"StorefrontTitleRetailerName"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"retailerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"retailer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"retailerId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:119,source:{body:"\n  query StorefrontTitleRetailerName($retailerId: ID!) {\n    retailer(id: $retailerId) {\n      id\n      name\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"StorefrontTitleCurrentStoreConfiguration"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentStoreConfiguration"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"brandedName"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:121,source:{body:"\n  query StorefrontTitleCurrentStoreConfiguration {\n    currentStoreConfiguration {\n      id\n      brandedName\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},u=()=>{const{shop:e}=(0,a.gt)(),t=null==e?void 0:e.retailerId,{data:n}=(0,o.aM)(l,{variables:{retailerId:t||""},skip:!t,ssr:!1}),{data:u}=(0,o.aM)(s,{ssr:!1}),{name:c}=(null==n?void 0:n.retailer)||{},{brandedName:d}=(null==u?void 0:u.currentStoreConfiguration)||{};(0,r.useEffect)((()=>{if(d&&c&&(document.title=[d,c].join(" - ")),i.Z.history){const{location:e}=i.Z.history,{protocol:t,host:n}=window.location,r="".concat(t,"//").concat(n),o=i.Z.getSeoTags(e);o&&(i.Z.updateCanonical(e,r),i.Z.updateMetaTags(o))}}),[d,c])}}}]);