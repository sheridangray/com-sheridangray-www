"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1082,1272],{51176:(e,a,t)=>{t.d(a,{a8:()=>l,oY:()=>d,DB:()=>_,f$:()=>u,z2:()=>p,ZL:()=>g,Tj:()=>m});var r=t(67598),n=t(22087),i=t(54817),o=t(75738),s=t(40273);const c="BUY_IT_AGAIN",l=e=>({type:"".concat(c,".UPDATE_FILTER"),filter:e}),d=e=>({type:"".concat(c,".RECEIVE_FILTERS"),filters:e}),_=({items:e,trackingParams:a,trackingEventNames:t})=>r=>(null!=t&&t.click&&r((0,s.L)(a.source_type,t.click,{...a})),Promise.resolve().then((()=>r((0,o.Kk)({items:e,immediate:!0}))))),u=e=>({type:"".concat(c,".EDIT_STAPLE_PREFERENCES"),preferences:e}),p=e=>({type:"".concat(c,".UPDATE_STAPLE_PREFERENCES"),preferences:e}),g=e=>({type:"".concat(c,".CLOSE_STAPLE_PREFERENCES"),preferences:e}),m=e=>(a,t)=>{const o=t().global.currentRetailer.id;(0,r.Z)("/v3/retailers/".concat(o,"/staple_preferences/update"),{method:"POST",body:{staple_preferences:e}}).then((t=>{var r;t&&null!==(r=t.meta)&&void 0!==r&&r.triggered_action&&a((0,n.pn)(t.meta.triggered_action)),a(p(e)),a(g(e))})).catch((e=>{console.error(e),a((0,i.h4)({title:"Something went wrong saving Your Staples. Please try again later.",type:"error"}))}))}},71272:(e,a,t)=>{t.d(a,{Xh:()=>g,T4:()=>m,xy:()=>h,P4:()=>b});var r=t(67598),n=t(75738),i=t(29041),o=t(7054),s=t(47858),c=t(40273),l=t(36480),d=(t(68),t(7438)),_=t(87491);const u="RETAILERS";function p(e){return{type:"".concat(u,".RECEIVE_RETAILERS_ERROR"),error:e}}function g(){return(e,a)=>{a().models.retailers.retailersLoading||(e({type:"".concat(u,".FETCH_RETAILERS")}),(0,r.Z)("/v3/retailers").then((a=>e(function(e){return{type:"".concat(u,".RECEIVE_RETAILERS"),response:e}}(a)))).catch((a=>e(p(a.statusText)))))}}function m(e,a={}){return(t,n)=>{t({type:"".concat(u,".FETCH_SERVICE_OPTIONS")}),t({type:"".concat(u,".FETCH_SERVICE_OPTIONS")}),(0,r.Z)(e,{body:a}).then((e=>t(function(e){return{type:"".concat(u,".RECEIVE_SERVICE_OPTIONS"),response:e}}(e)))).catch((e=>t(p(e.statusText))))}}const v={};function h(e,a={},t=100,n=!1){return(i,o)=>{const s=o().models.retailers,c=!_.isUndefined(e),l=c?"/v3/retailers/".concat(e,"/availability"):"/v3/retailers/availability",d=c?[e]:s.retailerList.map((e=>e.id)),p=v[l],g=Date.now();!n&&p&&p+t>g||!n&&o().global.idleMinutes>10||(v[l]=g,i({type:"".concat(u,".FETCH_RETAILERS_AVAILABILITY"),retailerIds:d}),(0,r.Z)(l,{body:a}).then((e=>i(function(e){return{type:"".concat(u,".RECEIVE_RETAILERS_AVAILABILITY"),response:e}}(e)))).catch((e=>{return i((a=e.statusText,{type:"".concat(u,".RECEIVE_RETAILERS_AVAILABILITY_ERROR"),error:a}));var a})))}}const b=({retailer:e,categoryLabel:a=null,skipRetainCurrentPath:t=!1,popularPresent:r=!1,activeServiceType:u})=>(p,g)=>{const m=e.trackingParams&&e.trackingParams.inventory_area_id,v=g(),h=v.global.trackingParams.warehouse_id.toString(),b=v.global.currentUser.active_service_type,y=Backbone.history.getFragment(),k=e.slug;let f="".concat(k,"/storefront");const R=!t&&function(e){return _.any(e.match(/partner_recipe_wip|partner_recipe|promotions/))}(y),T=e.id===v.global.currentRetailer.id,C=b===u,S=y.includes(k);if(C&&T&&v.app.header.showRetailerChooser&&S)return void p((0,o.Nc)({track:!1}));if(R?f=y:function(e){return _.any(e.match(/reorder\/|\/search\/|\/search_v3\/|\/partner_recipe_wip\/|\/partner_recipe_wip\?|\/multi_search\/|\/multi_search\?|\/favorites$|\/previously-ordered$/))}(y)&&(f=y.replace(y.split("/")[0],k),f=d.Z.removeQueryParameter(f,"aisle_id")),function(e){return _.any(e.match(/\/search\/|\/search_v3\//))}(y)&&(f=f.split("?")[0]),e.wind_down_container_path&&e.wind_down_container_path.includes("retailer-update"))return void p((0,l.c4)(e.wind_down_container_path,{trigger:!0}));p((0,i.Jt)(e.id,u)),R?Backbone.history.loadUrl(Backbone.history.fragment):p((0,l.c4)(f,{trigger:!0}));const w=e.attributes&&-1!==e.attributes.indexOf("popular"),E=w?"popular_present_selected":r&&!w?"popular_present_not_selected":"no_popular";p((0,s.d2)({warehouse_id:e.id})),p((0,n.Ee)()),p((0,o.Nc)({track:!1,forced:!0})),p((0,c.L)("nav","warehouse_change",{warehouse_id:e.id,previous_warehouse_id:h,inventory_area_id:m,source_type:a,source_value:E,source1:u}))}},56533:(e,a,t)=>{t.d(a,{a:()=>i,Z:()=>o});var r=t(1),n=t.n(r);const i={type:n().string.isRequired,data:n().object},o=n().shape(i)},80901:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={id:n().string.isRequired,attributes:n().arrayOf(n().string.isRequired).isRequired,business_name:n().string,address_line_1:n().string,address_line_2:n().string,zip_code:n().string,address_type:n().string,note:n().string,city:n().string,state:n().string,lat:n().number,lon:n().number,structured_address:n().arrayOf(n().string).isRequired},o=n().shape(i)},66351:(e,a,t)=>{t.d(a,{R:()=>i,Z:()=>o});var r=t(1),n=t.n(r);const i={label:n().string.isRequired,color:n().string,accessible_color:n().string},o=n().shape(i)},51572:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={alpha_2:n().string.isRequired,zip_code_pattern:n().string.isRequired,postal_code_max_length:n().number.isRequired,postal_code_min_length:n().number.isRequired},o=n().shape(i)},37990:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={type:n().string,timestamp:n().number},o=n().shape(i)},25531:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={strings:n().arrayOf(n().shape({attributes:n().arrayOf(n().string),value:n().string,color:n().string}).isRequired).isRequired},o=n().shape(i)},23488:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={name:n().string.isRequired,color:n().string},o=n().shape(i)},91562:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={url:n().string.isRequired,alt:n().string.isRequired,sizes:n().array,responsive:n().shape({defaults:n().object,template:n().string})},o=n().shape(i)},52263:(e,a,t)=>{t.d(a,{V6:()=>r.Z,fN:()=>n.Z,RK:()=>i.Z,rC:()=>o.Z});var r=t(56533),n=(t(80901),t(66351),t(51572),t(37990),t(25531)),i=(t(23488),t(91562)),o=(t(35372),t(53778),t(47573));t(84638),t(73232),t(89683),t(74914),t(83636),t(72281),t(43978)},35372:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={type:n().string.isRequired,data:n().object.isRequired},o=n().shape(i)},53778:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r),i=t(35372);const o=n().arrayOf(i.Z)},47573:(e,a,t)=>{t.d(a,{Z:()=>g});var r=t(1),n=t.n(r),i=t(56533),o=t(72281),s=t(53778),c=t(91562),l=t(83636);const{arrayOf:d,number:_,string:u}=n(),p={attributes:d(u),click_action:i.Z,id:u.isRequired,image_list:d(c.Z),image:c.Z,interactions:s.Z,legacy_id:_,name:u,price_affix_aria:u,price_affix:u,pricing:l.ZP,qty_attributes:o.Z,size_aria:u,size:u},g=n().shape(p)},84638:(e,a,t)=>{t.d(a,{T:()=>c,Z:()=>l});var r=t(1),n=t.n(r),i=t(47573),o=t(23488),s=t(25531);const c={item:i.Z,icon:o.Z,item_descriptor:s.Z,primary_details:s.Z,secondary_details:s.Z},l=n().shape(c)},73232:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(1),n=t.n(r),i=t(56533);const o={label:n().string,action:i.Z,icon:n().shape({name:n().string.isRequired,color:n().string})},s=n().shape(o)},89683:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(1),n=t.n(r),i=t(47573);const o={qty:n().number,item:i.Z},s=n().shape(o)},74914:(e,a,t)=>{t.d(a,{Z:()=>_});var r=t(1),n=t.n(r),i=t(84638),o=t(43978),s=t(37990),c=t(23488),l=t(25531);const d={header_text:l.Z,header_icon:c.Z,item_row:i.Z,secondary_header_text:l.Z,secondary_item_row:i.Z,typed_actions:n().arrayOf(o.Z),loading_data_dependencies:n().arrayOf(s.Z)},_=n().shape(d)},83636:(e,a,t)=>{t.d(a,{ZP:()=>c});var r=t(1),n=t.n(r);const{string:i}=n(),o={type:i.isRequired,label:i.isRequired,action:i},s={badge:n().shape(o)},c=n().shape(s)},72281:(e,a,t)=>{t.d(a,{Z:()=>o});var r=t(1),n=t.n(r);const i={initial:n().number.isRequired,increment:n().number.isRequired,min:n().number.isRequired,max:n().number.isRequired,unit:n().string,unit_aria:n().string,select:n().shape({options:n().arrayOf(n().number.isRequired).isRequired,default_option:n().number.isRequired,custom_option:n().shape({label:n().string.isRequired}).isRequired})},o=n().shape(i)},43978:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(1),n=t.n(r),i=t(73232);const o={type:n().string.isRequired,label_action:i.Z},s=n().shape(o)},75525:(e,a,t)=>{t.d(a,{e:()=>r,p:()=>n});const r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CheckoutCostcoQuebecUnavailableModalViewLayout"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewLayout"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressManagement"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"costcoQuebecUnavailableModal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"titleString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cancelString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"continueString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"costcoCanadaUrlString"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:294,source:{body:"\n  query CheckoutCostcoQuebecUnavailableModalViewLayout {\n    viewLayout {\n      addressManagement {\n        costcoQuebecUnavailableModal {\n          titleString\n          messageString\n          cancelString\n          continueString\n          costcoCanadaUrlString\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"TransferCartToRetailer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"retailerInventorySessionToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sourceRetailerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"destRetailerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transferCartToRetailer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"retailerInventorySessionToken"},value:{kind:"Variable",name:{kind:"Name",value:"retailerInventorySessionToken"}}},{kind:"Argument",name:{kind:"Name",value:"sourceRetailerId"},value:{kind:"Variable",name:{kind:"Name",value:"sourceRetailerId"}}},{kind:"Argument",name:{kind:"Name",value:"destRetailerId"},value:{kind:"Variable",name:{kind:"Name",value:"destRetailerId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:341,source:{body:"\n  mutation TransferCartToRetailer(\n    $retailerInventorySessionToken: String!\n    $sourceRetailerId: ID!\n    $destRetailerId: ID!\n  ) {\n    transferCartToRetailer(\n      retailerInventorySessionToken: $retailerInventorySessionToken\n      sourceRetailerId: $sourceRetailerId\n      destRetailerId: $destRetailerId\n    ) {\n      id\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}},48786:(e,a,t)=>{t.d(a,{ng:()=>r,s6:()=>n,os:()=>i,_N:()=>o});const r=e=>{var a,t,r,n,i,o;return(null===(a=e.app)||void 0===a||null===(t=a.searchBar)||void 0===t?void 0:t.searchBarPlaceholderOverride)||(null===(r=e.global.appModules)||void 0===r||null===(n=r.header)||void 0===n||null===(i=n.data)||void 0===i||null===(o=i.search_bar)||void 0===o?void 0:o.placeholder_label)},n=e=>{var a,t,r,n;return null===(a=e.global.appModules)||void 0===a||null===(t=a.header)||void 0===t||null===(r=t.data)||void 0===r||null===(n=r.search_bar)||void 0===n?void 0:n.autocomplete_container_path},i=e=>{var a,t,r;return null===(a=e.global.appModules)||void 0===a||null===(t=a.header)||void 0===t||null===(r=t.data.search_bar)||void 0===r?void 0:r.autosuggest_v4},o=e=>{var a,t,r,n;return null===(a=e.global.appModules)||void 0===a||null===(t=a.header)||void 0===t||null===(r=t.data)||void 0===r||null===(n=r.search_bar)||void 0===n?void 0:n.search_button_label}},13938:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var r=t(80053),n=(t(0),t(51814)),i=t(1),o=t.n(i),s=t(11),c=t(7438),l=t(86237),d=t(67598),_=t(27888),u=t(3946),p=t(71272),g=t(75738),m=t(25789),v=t(48839),h=t(51176),b=t(22087),y=t(40273),k=t(36480),f=t(29041),R=t(35957),T=t(7054),C=t(52263),S=t(98995),w=t(48786),E=t(58894),I=t(75525);var P=t(3);function q(){return q=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},q.apply(this,arguments)}const Z=e=>{const{transferCart:a}=(()=>{const[e]=(0,E.Db)(I.p);return{transferCart:e}})(),t=(a,t)=>{const r=ICStore.router.getCurrentRoute(t.path);if(r.handler&&r.handler.startsWith(":retailer_slug/")){const a=r.params[0],t=e.currentRetailer||{};a&&a!==t.slug&&e.updateGlobalState({current_retailer_slug:a})}if(t.display_path&&t.display_path!==t.path){if(a.preventDefault(),/search_v3\/.*\?num_other_warehouses/.test(t.path)||/buy_it_again/.test(t.path)){const a=Object.fromEntries(new URLSearchParams(t.path.split("?").pop()));return void e.navigate(t.display_path,{trigger:!0},{moduleFetchParams:a})}c.Z.getQueryParameter("cart_id")&&c.Z.getQueryParameter("token")||e.hideModal({skipReturnTo:!0}),e.navigate(t.display_path,{trigger:!1,replace:!1}),e.deactivateTabs(),ICStore.router.renderContainerForPath(t.path),ICStore.router.history.push(t.display_path)}},r=()=>{const{data:a,type:t}=e;switch(t){case"dismiss_modal":return"";case"dismiss_incentive_modal":return e.currentFragment;default:return"#";case"navigate_to_unavailable":return"unavailable";case"navigate_to_container":case"navigate_to_recipe_tab":case"item/create_recurring_order":case"navigate_to_store_and_open_cart":return a.path;case"navigate_to_your_items":case"navigate_to_item_container":case"navigate_to_configurable_item_container":case"navigate_to_search":case"switch_retailer":case"navigate_to_recurring_order":case"navigate_to_wind_down_container":return a.container.path;case"navigate_to_url":return a.url;case"navigate_to_guest_login":return"guest_login";case"navigate_to_item":{let e=null,t=null,r=null;return a.tracking_params&&(e=a.tracking_params.item_card_impression_id,t=a.tracking_params.source_type,r=a.tracking_params.source_value),"items/".concat(a.item.id,"?item_card_impression_id=").concat(e,"&source_type=").concat(t,"&source_value=").concat(r).concat(a.entry_viewpoint?"#".concat(a.entry_viewpoint):"")}case"navigate_to_alternate_retailers_offers":return"personalized_offers";case"navigate_to_special_request":return"".concat(e.currentRetailer.slug,"/special_requests?sg=").concat(a.query_params.sg);case"navigate_to_special_request_modal":return"".concat(e.currentRetailer.slug,"/special_request?sg=").concat(a.query_params.sg,"&term=").concat(a.query_params.term);case"navigate_to_browse":return"browse";case"navigate_to_checkout":return"checkout";case"navigate_to_welcome":return"welcome";case"navigate_to_checkout_v3":return"checkout_v3";case"navigate_to_checkout_as_guest":return"guest_checkout";case"navigate_to_order":return"orders/".concat(a.order.id);case"navigate_to_try_express":return"try-express";case"navigate_to_rating":return"".concat(a.rating.rating_url);case"navigate_to_referral":return"referrals";case"navigate_to_about_retailer":return"".concat(a.retailer.slug,"/about");case"navigate_to_retailer_info":return"".concat(a.retailer.slug,"/info?source_type=").concat(a.query_params.source_type);case"navigate_to_service_times":return"".concat(a.retailer.slug,"/info?tab=").concat(a.service_type);case"navigate_to_delivery_times":return"".concat(a.retailer.slug,"/delivery_times");case"navigate_to_reserve_option":return"".concat(a.retailer.slug,"/reserve_option");case"navigate_to_how_it_works":return"how_it_works";case"navigate_to_express":return"subscriptions/account?source_type=".concat(a.query_params.source_type);case"navigate_to_express_tier":return"express_tier?source_type=".concat(a.query_params.source_type);case"navigate_to_vehicle_info":return"pickup/vehicle_info/".concat(a.query_params.order_delivery_uuid);case"navigate_to_delegate_info":return"pickup/delegate_info/".concat(a.query_params.order_delivery_uuid);case"open_maps":return a.google_maps_url;case"focus_on_search":return"quick_search";case"navigate_to_account":return"account/".concat(a.section);case"navigate_to_group_cart_info_modal":return"shop_with_friends";case"close_nested_container":return"".concat(e.currentFragment.split("?")[0],"/#")}},n=r=>{const{afterClick:n,data:i,moduleTrackingParams:o,type:s}=e;e.stopPropagation&&r.stopPropagation(),(r=>{const{data:n}=e;switch(e.type){case"app_reload":window.location.reload();break;case"open_cart":e.openCart();break;case"close_cart":r&&r.preventDefault(),e.closeCart();break;case"remove_unit_configuration":r&&r.preventDefault(),e.removeUnitConfiguration(n);break;case"duplicate_unit_configuration":r&&r.preventDefault(),e.duplicateUnitConfiguration(n);break;case"switch_cart":e.updateGlobalState({current_cart_id:n.cart_id});break;case"navigate_to_guest_login":e.navigate("/guest_login",{trigger:!0},{modal:!0});break;case"navigate_to_order":e.closeCart(),e.navigate("/orders/".concat(n.order.id),{trigger:!0});break;case"navigate_to_meals_tab":{r&&r.preventDefault();const[a,t]=n.path.split("/"),i=[a,"collections",t].join("/");e.navigate(i,{trigger:!0});break}case"open_store_chooser":{const a=e.server_action&&e.server_action.data,t=a&&a.container&&a.container.path;e.showRetailerChooser({containerPath:t});break}case"close_store_chooser":e.hideRetailerChooser({track:!0});break;case"manage_cart":e.setCartPath("cartManage",n),r.preventDefault();break;case"carts_list":e.setCartPath("cartsList"),r.preventDefault();break;case"cart_move_items":e.moveItems(n.cart_id);break;case"navigate_to_retailer_info":e.trayIsOpen&&e.hideTray();break;case"dismiss_modal":if(e.trayIsOpen)return void e.hideTray();"cart"===e.returnToContext&&e.openCart(),e.hideModal();break;case"dismiss_incentive_modal":case"close_nested_container":e.hideModal();break;case"show_existing_shared_cart_modal":e.showExistingSharedCartModal();break;case"show_delivery_promotion_modal":case"show_finish_my_cart_modal":case"show_suggested_items_modal":case"render_container":case"show_reorder_modal":case"send_request":case"express_enterprise_placement_modal":case"express_placement_modal":case"express_placement_modal_sheet":case"express_stepwizard_modal":case"navigate_to_customer_support":r.preventDefault(),e.handleServerTriggeredAction(e);break;case"open_dialog_confirm":{r.preventDefault();const{data:a}=e;e.showModal({modalType:"ConfirmationModal",modalProps:{title:a.header,description:a.subheader,confirmText:a.affirm_button_text,cancelText:a.reject_button_text,onConfirm:()=>{e.trackAbstractEvent({event:"click",eventNames:a.affirm_action.data.tracking_event_names,trackingParams:a.affirm_action.data.tracking_params}),e.hideModal()}}});break}case"render_modal":{const{modal:a,context:t}=n;r.preventDefault(),a.tracking_event_names&&a.tracking_params&&e.trackAbstractEvent({event:"view",eventNames:a.tracking_event_names,trackingParams:a.tracking_params}),e.showModal({modalType:"GenericTextModal",modalProps:{...a,returnToContext:t}});break}case"render_graphic_modal":{const{modal:a,context:t}=n;r.preventDefault(),e.showModal({modalType:"GenericGraphicTextModal",modalProps:{...a,returnToContext:t}});break}case"show_shared_cart_info_modal":e.showSharedCartInfoModal();break;case"update_bundle":{const{params:a}=n;r.preventDefault(),e.updateBundle(a);break}case"send_request_for_incentive":{const{confirmation_data:a}=n;r.preventDefault(),e.handleServerTriggeredAction({...e,type:"send_request"}).then((()=>e.showModal({modalType:"StorefrontIncentiveModal",modalProps:{contentLabel:a.container.title,containerPath:a.container.path,tracking_params:a.tracking_params,tracking_event_names:a.tracking_event_names}})));break}case"update_generic_item":r.preventDefault(),e.handleServerTriggeredAction({...e,type:"send_request"}).then((()=>e.fetchRemoteCart()));break;case"switch_retailer":{const a=n.service_type;n.retailer.id,e.setCurrentRetailer(n.retailer.id,a),e.hideRetailerChooser({track:!1});break}case"switch_to_wind_down_retailer":e.setCurrentRetailer(n.retailer.id),(0,d.Z)(n.update_path,{method:"POST",data:{}}).then((e=>{}));break;case"navigate_to_welcome":e.navigate("welcome",{trigger:!0,replace:!1});break;case"navigate_to_item":{const a=e.currentRetailer||{};n.retailer&&n.retailer.slug!==a.slug&&e.navigateToRetailer(n);break}case"navigate_to_item_container":{const{path:a}=n.container;if(!a)return;e.navigateToItem({path:a,...n});break}case"navigate_to_container_and_change_retailer":e.setCurrentRetailer(n.retailer.id,null,{disableRouteSideEffects:!0}),n.display_path&&n.path&&(r.preventDefault(),(0,y.D)({event:"click",eventNames:n.tracking_event_names,trackingParams:{...e.tracking_params,...n.tracking_params}}),c.Z.getQueryParameter("cart_id")&&c.Z.getQueryParameter("token")||e.hideModal({skipReturnTo:!0}),e.navigate(n.path,{trigger:!0,replace:!1}),e.deactivateTabs(),ICStore.router.history.push(n.display_path)),e.closeCart();break;case"navigate_to_store_and_open_cart":t(r,n),e.openCart();break;case"navigate_to_container":n.dismiss_modal&&e.hideModal(),t(r,n),e.closeCart();break;case"navigate_to_your_items":e.updateFilter(n.selected_filter),t(r,n),e.closeCart();break;case"navigate_to_configurable_item_container":t(r,n),e.closeCart();break;case"navigate_to_wind_down_container":n.path&&(r&&r.preventDefault(),e.hideModal({skipReturnTo:!0}),e.navigate(n.display_path,{trigger:!1,replace:!1}),e.deactivateTabs(),ICStore.router.renderContainerForPath(n.path),ICStore.router.history.push(n.path)),e.closeCart();break;case"render_replacements_container":{r&&r.preventDefault();const{path:a}=n.container;(!a||"string"==typeof a&&-1!==a.indexOf("undefined"))&&_.Z.info("render_replacements_container action handler bad container path",{data:n});const t=new URLSearchParams(a.split("?")[1]).get("context");-1!==a.indexOf("?")&&"item_container_select_replacement"===t?e.showModal({displayUrl:a}):e.showModal({modalType:"ChangeReplacementsModalContainerRenderer",modalProps:{containerPath:a}});break}case"navigate_to_special_request_modal":{r&&r.preventDefault();const a="".concat(e.currentRetailer.slug,"/special_request?sg=").concat(n.query_params.sg,"&term=").concat(n.query_params.term);e.navigate(a,{trigger:!0,replace:!1});break}case"change_zip_code":r&&r.preventDefault(),e.openChangeLocationModal({source:"zip_needed"});break;case"navigate_to_recurring_order":case"navigate_to_try_express":case"navigate_to_checkout":case"navigate_to_checkout_as_guest":e.hideTray(),e.closeCart();break;case"navigate_to_checkout_v3":e.hideTray(),e.closeCart(),e.handleServerTriggeredAction(e);break;case"add_to_order_delivery_in_progress":{r.preventDefault();const a=n.add_to_order_in_progress_containers;1===a.length?e.showModal({modalType:"ModalContainerRenderer",modalProps:{containerPath:a[0].path,modalStyles:{maxColumns:6}}}):e.showModal({modalType:"ChooseOrderToAddModal",modalProps:{containers:a}});break}case"item/add_to_recurring_order":r.preventDefault(),e.trackAbstractEvent({event:"add_item",eventNames:e.tracking_event_names,trackingParams:e.tracking_params}),(0,d.Z)(n.creation_path,{method:"POST",data:{item_id:n.item_id,qty:1}}).then((a=>{a&&a.meta&&a.meta.triggered_action&&e.handleServerTriggeredAction(a.meta.triggered_action)})).catch((a=>{a&&a.meta&&a.meta.triggered_action&&e.handleServerTriggeredAction(a.meta.triggered_action)}));break;case"item/create_recurring_order":e.trackAbstractEvent({event:"add_item",eventNames:e.tracking_event_names,trackingParams:e.tracking_params}),e.hideTray(),e.closeCart();break;case"step_transition":case"prevent_default_action":r.preventDefault();break;case"open_pickup_location_chooser":r.preventDefault(),(0,y.D)({event:"click",eventNames:e.data.tracking_event_names,trackingParams:e.data.tracking_params}),e.hideModal&&e.hideModal(),e.handleServerTriggeredAction(e.server_action?e.server_action:e);break;case"show_tray":{r.preventDefault();const a=()=>{e.showTray({trayType:e.data.container.tray_type||"TrayContainerRenderer",trayProps:{className:"LoyaltyCardTray",contentLabel:e.data.container.title,containerPath:e.data.container.path}})};e.trayIsOpen?(e.hideTray(),window.setTimeout(a,250)):a();break}case"hide_tray":r.preventDefault(),e.hideTray();break;case"switch_sync_cart":if(r&&r.preventDefault(),n.storefront_redirection&&n.transfer_cart_to_retailer_mutation){const{storefront_redirection:{retailer_slug:t},transfer_cart_to_retailer_mutation:{source_retailer_id:r,dest_retailer_id:i,retailer_inventory_session_token:o}}=n;a({variables:{retailerInventorySessionToken:o,sourceRetailerId:String(r),destRetailerId:String(i)}}).then((({errors:a})=>{a||(e.hideTray(),e.navigate("/store/".concat(t,"/storefront"),{trigger:!0}))}))}break;case"navigate_to_generic_item_request":r.preventDefault(),e.showModal({modalType:"GenericItemRequestModal",modalProps:{containerPath:e.data.container.path}});break;case"show_promo_code_modal":r.preventDefault(),e.showModal({modalType:"CouponModal",modalProps:n});break;case"bootstrap_scandit":r.preventDefault(),e.showModal({modalType:"ScanditModal",modalProps:{...n}});break;case"show_manual_customer_id_form":r.preventDefault(),e.showModal({modalType:"ManualCustomerIdModal",modalProps:{...n}})}})(r),i&&e.trackAbstractEvent({event:"click",eventNames:i.tracking_event_names,trackingParams:{...o,...i.tracking_params}}),n&&n({type:s,data:i,event:r}),c.Z.routeAnchorLinkEvent(r)};if(e.render)return e.render({onClick:n});const i=r(),o=i||!e.elementType?"a":e.elementType,s=(()=>{const{backboneStarted:a,currentFragment:t,matchExactURL:n}=e,i=r();return!!a&&(n?i===t:i===t.split("?")[0])})(),l="button"===e.elementType,{aria:p}=e,g=l?{backgroundColor:e.snacksTheme.colors.action,borderColor:e.snacksTheme.colors.action,":hover":{backgroundColor:e.snacksTheme.colors.actionHover,borderColor:e.snacksTheme.colors.actionHover}}:{color:e.snacksTheme.colors.action,":hover":{color:e.snacksTheme.colors.actionHover}},m={title:e.anchorTitle,tabIndex:e.tabIndex,role:p?p.role:null,"aria-hidden":p?p.hidden:null,"aria-label":p?p.label:null,"aria-labelledby":p?p.labelledby:null,"aria-describedby":p?p.describedby:null,"aria-disabled":p?p.disabled:null,className:e.className,rel:"navigate_to_url"===e.type?"nofollow noopener noreferrer":null,target:(()=>{const{data:a,type:t}=e;switch(t){case"navigate_to_url":{const{target:e="_blank"}=a;return e}case"navigate_to_account":return a.target;case"open_maps":return"_blank";default:return null}})()},v=(e=>{const{type:a}=e;if("open_mobile_search"===a){const{searchPlaceholderLabel:a,autocompleteContainerPath:t,isAutosuggestV4Enabled:r}=e;return{to:{state:{overlayContentLabel:a,overlayProps:{autocompleteContainerPath:t,placeholderText:a},overlayType:r?"mobileSearchBarV4":"mobileSearchBar"},..."undefined"!=typeof window&&{search:window.location.search,hash:window.location.hash}}}}})(e);return void 0!==v?(0,P.tZ)(u.Link,q({style:{...g,...e.style,...s?e.activeStyle:e.inactiveStyle}},m,v),e.children):(0,P.tZ)(o,q({},m,{style:[g,e.style,s?e.activeStyle:e.inactiveStyle],href:i,onClick:n,"data-bypass":e.dataBypass}),e.children)};Z.propTypes={openCart:o().func.isRequired,closeCart:o().func.isRequired,setCartPath:o().func.isRequired,showSharedCartInfoModal:o().func.isRequired,showExistingSharedCartModal:o().func.isRequired,moveItems:o().func.isRequired,navigate:o().func.isRequired,openChangeLocationModal:o().func.isRequired,setCurrentRetailer:o().func.isRequired,updateGlobalState:o().func.isRequired,updateBundle:o().func.isRequired,navigateToRetailer:o().func.isRequired,showModal:o().func.isRequired,hideModal:o().func.isRequired,handleServerTriggeredAction:o().func.isRequired,trackAbstractEvent:o().func.isRequired,showRetailerChooser:o().func.isRequired,deactivateTabs:o().func.isRequired,activeStyle:o().object,afterClick:o().func,anchorTitle:o().string,aria:o().shape({describedby:o().string,label:o().string,labelledby:o().string,disabled:o().bool}),backboneStarted:o().bool,className:o().string,currentFragment:o().string,currentRetailer:o().object,data:o().shape({path:o().string,url:o().string,order:o().object,rating:o().object,storefront_redirection:o().shape({retailer_slug:o().string}),transfer_cart_to_retailer_mutation:o().shape({source_retailer_id:o().string,dest_retailer_id:o().string,retailer_inventory_session_token:o().string})}),dataBypass:o().bool,elementType:o().string,matchExactURL:o().bool,moduleTrackingParams:o().object,render:o().func,snacksTheme:o().object,stopPropagation:o().bool,style:o().object,tabIndex:o().string,type:o().string.isRequired,server_action:C.V6,location:o().object,history:o().object,searchPlaceholderLabel:o().string,autocompleteContainerPath:o().string,isAutosuggestV4Enabled:o().bool},Z.defaultProps={dataBypass:!1};const M={openCart:g.LA,closeCart:g.Ee,setCartPath:m.QX,showSharedCartInfoModal:m.xo,showExistingSharedCartModal:m.wQ,moveItems:m.B6,navigate:k.c4,openChangeLocationModal:v.openChangeLocationModal,setCurrentRetailer:f.Jt,updateGlobalState:f.tr,updateBundle:f.jG,navigateToRetailer:p.P4,showModal:R.K,hideModal:R.V,handleServerTriggeredAction:b.pn,trackAbstractEvent:y.D,showRetailerChooser:T.BO,hideRetailerChooser:T.Nc,deactivateTabs:T.bU,showTray:S.T,hideTray:S.h,removeUnitConfiguration:g.vt,duplicateUnitConfiguration:g.XK,navigateToItem:v.navigateToItem,fetchRemoteCart:g.gH,updateFilter:h.a8},N=(0,n.connect)((e=>{const a=r.Z.History.started||!1,{currentRetailer:t}=e.global;return{backboneStarted:a,currentRetailer:t,currentFragment:a&&r.Z.history.getFragment()||"",trayIsOpen:!!e.app&&!!e.app.tray&&null!==e.app.tray.trayType,searchPlaceholderLabel:(0,w.ng)(e),isAutosuggestV4Enabled:(0,w.os)(e),autocompleteContainerPath:(0,w.s6)(e)}}),M)((0,l.Zz)((0,s.default)(Z)))}}]);